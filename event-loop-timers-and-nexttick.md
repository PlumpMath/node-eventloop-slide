# The Node.js Event Loop, Timers, and `process.nextTick()`

勝手翻訳です。

[オリジナル](https://github.com/nodejs/node/blob/master/doc/topics/event-loop-timers-and-nexttick.md)

## イベントループって何?

イベントループはノンブロッキング I/O 処理を実行できるようになる — JavaScript がシングルスレッドであるにもかかわらず — 可能な限りシステムカーネルに処理を押し付けて。

最新のカーネルはマルチスレッドで、それらは複数の処理をバックグラウンドで動かすことができる。それら脳処理のうち一つが終わると、適切なコールバックが最終的に呼び出されるように **poll* キューに登録されるためにに、カーネルは Node.js に通知する。このトピックについて以後詳細に説明する。

## イベントループの説明

Node.js が開始した時、イベントロープが初期化され、入力されたスクリプトの処理 (もしくは、REPL で入力されたもの、これはこのドキュメントで触れない) で非同期 API 呼び出し、タイマー、`process.nextTick()` 呼び出しの後、イベントループ処理ンが開始される。

以下の図はイベントループの処理順序の概要を表したものである。

```txt
   ┌───────────────────────┐
┌─>│        timers         │
│  └──────────┬────────────┘
│  ┌──────────┴────────────┐
│  │     I/O callbacks     │
│  └──────────┬────────────┘
│  ┌──────────┴────────────┐
│  │     idle, prepare     │
│  └──────────┬────────────┘      ┌───────────────┐
│  ┌──────────┴────────────┐      │   incoming:   │
│  │         poll          │<─────┤  connections, │
│  └──────────┬────────────┘      │   data, etc.  │
│  ┌──────────┴────────────┐      └───────────────┘
│  │        check          │
│  └──────────┬────────────┘
│  ┌──────────┴────────────┐
└──┤    close callbacks    │
   └───────────────────────┘
```

*note: イベントループの四角の部分は "フェーズ" と呼ぶ。*

どのフェーズもコールバックの FIFO キューを持っている。どのフェーズの間も独自のやり方を持っていて、一般的に、イベントループからフェーズが呼び出された時に、フェーズに合った処理が行われ、このフェーズのキューが空になるか実行可能なコールバックの最大数を超えるまでコールバックが実行されるる。キューがからになるかコールバックの到達すると、イベントループは次のフェーズに移動する、など。
